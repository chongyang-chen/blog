---
title: C语言学习笔记（十一）
tags:
  - C
  - 指针
categories:
  - C
date: 2018-07-14 11:39:56
---

指针是C语言的一个重要组成部分，是C语言的核心，用好指针可以在编程中起到事倍功半的效果。
<!-- more -->

指针与地址

指针就是变量在内存中的地址。假如一个计算机的内存是4G，操作系统和其他常用程序占了2G内存，则计算机的可用内存还有2G。内存又分为堆和栈，系统要为我们的编写的程序分配内存，C语言中不同的数据类型，占用的内存是不一样的，所以我们要选择合适的数据类型，尽量占用更少的内存。

指针变量的赋值与引用：

```
int a;
int *p;
p = &a;
*p = 0;
```

指针与数组

C语言中指针和数组有着十分密切的关系。把数组的地址赋值给指针变量，就可以通过指针变量来引用数组。

比如：

```
int *p, a[10];
p = a;
//p = a;等价于 p = &a[0];
```
数组名就是数组首元素的地址。

```
*p = *&a[0] = a[0];
*(p + 1) 等价于 a[1];
```

字符串与指针

使用字符指针指向一个字符串：

```
char *string = "Hello World.";
```

字符串数组

字符串数组不同于字符数组，它是以字符串作为数组元素的数组，可以将其看作一个二维字符数组。

```
char city[2][30] = 
{
	"BeiJing",
	"ShangHai"
}
```

这种写法每个字符串占用30个字节的内存空间，造成了极大的浪费，可以写成指针数组。

```
char *city[] = 
{
	"BeiJing",
	"ShangHai"
}

//[]的优先级要高于*，所以city是一个数组，数组元素是char *
```

指向指针的指针

```
int a;
int *p, **q;
p = &a;
q = &p;
```
p 是一个指针变量，它本身也有地址，q是一个指针的指针，指向p的地址。

指针变量可以作为函数的参数，函数也可以返回指针变量。

```
void swap(int *a, int *b){
	if(*a == *b){
		return;
	}
	int temp;
	temp = *a;
	*a = *b;
	*b = tmp;
}
//函数调用时要传入变量的地址

int x = 10, y = 20;
swap(&x, &y);

int sum;
int *add(int a, int b){
	int *p;
	p = &sum;
	sum = a + b;
	return p;
}
//注意：函数不能返回局部变量的地址，函数调用结束，局部变量将被销毁.

//函数的调用：
int *iResult;
iResult = add(1, 1);

```
来看函数的声明：

```
int *add(int a, int b);

()的优先级高于*，所以add是一个函数，有两个参数，返回类型是 int *。
如果写成这样：

int (*add)(int a, int b);
则add是一个指针，指针指向一个函数，这个函数有两个参数，返回值是int型。

```



